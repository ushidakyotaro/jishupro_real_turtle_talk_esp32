# Robot Implementation Guide

このガイドでは、ロボット制御ライブラリを使用して新しいロボットを実装する方法を説明します。

**まだ、一般的に利用できるようにはしておりません**

## 概要

このライブラリは以下の機能を提供します：
- TCP/IP通信によるロボット制御
- サーボモーター制御の基本機能
- モーション制御フレームワーク
- エラーハンドリング

## 基本構造

```plaintext
your_robot_project/
├── esp32/                 # ESP32側のコード
│   ├── include/          # ヘッダーファイル
│   ├── src/             # ソースコード
│   │   └── main.cpp     # メインプログラム
│   └── lib/             # 外部ライブラリ
└── client/              # クライアント側のコード
    └── src/
        └── client_main.py
```

## 実装手順

### 1. ESP32側の実装

#### 1.1 基本設定
- `config.h`を作成し、ロボットの基本設定を定義
  - サーボ数
  - ピン配置
  - 角度制限
  - 通信設定

```cpp
// 実装予定
struct SystemConfig {
    int servoCount;
    // その他の設定
};
```

#### 1.2 メインプログラム
サンプルコードを参考に、以下の要素を実装：

```cpp
// RobotBaseクラスを継承
class YourRobot : public RobotBase {
protected:
    void updateMotion() override {
        // モーション制御の実装
    }
};
```

### 2. クライアント側の実装

#### 2.1 基本設定
- サーブルコードを参考に必要なパラメータを定義
- UI要素のカスタマイズ

```python
class YourRobotClient(RobotClient):
    def __init__(self, host: str):
        super().__init__(host)
        # カスタム設定
```

## 参考実装

### sample_main.cpp
基本的なロボット制御の実装例を提供。
- モード管理
- サーボ制御
- 通信処理
- エラーハンドリング

### sample_message_processor.cpp
通信プロトコルの実装例。
- コマンド処理
- パラメータ管理
- ステータス応答

### sample_client_main.py
クライアントUIの実装例。
- 接続管理
- パラメータ設定
- ステータス表示

## 今後の実装予定

以下の機能は現在開発中です：
1. 設定ファイルのJSON形式対応
2. モーションパターンのライブラリ化
3. エラーハンドリングの拡張
4. 通信プロトコルの拡張
5. センサー入力への対応

## 注意事項

1. サーボモーターの制御
   - 角度制限を適切に設定
   - 急激な動作を避ける

2. 通信処理
   - タイムアウト処理を適切に実装
   - 接続断の処理を確実に行う

3. エラーハンドリング
   - 適切なエラー報告
   - 緊急停止機能の実装

## サポート

問題や質問がある場合は、以下の手順で対応してください：
1. サンプルコードを確認
2. エラーログを確認
3. 実装ガイドを参照
4. issueを作成

## ライセンス

MITライセンスの下で公開されています。
```
